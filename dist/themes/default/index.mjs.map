{"version":3,"sources":["../../../src/registry/index.ts","../../../src/themes/default/components/LandingPage.tsx","../../../src/themes/default/components/ToolboxPanel.tsx","../../../src/themes/default/index.ts"],"names":["jsx"],"mappings":";;;AAIA,IAAM,aAAgD,EAAC;AAWhD,SAAS,aAAA,CACd,OAAA,EACA,UAAA,EACA,MAAA,EACM;AACN,EAAA,UAAA,CAAW,OAAO,IAAI,EAAE,GAAG,WAAW,OAAO,CAAA,EAAG,GAAG,UAAA,EAAW;AAE9D,EAAA,IAAI,MAAA,EAAQ;AACV,KAAwB,EAAE,EAAA,EAAI,OAAA,EAAS,GAAG,MAAA,GAAO;AAAA,EACnD;AACF;ACbO,SAAS,kBAAA,CAAmB,EAAE,SAAA,EAAW,KAAA,EAAO,UAAS,EAAqB;AACnF,EAAA,uBACE,GAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,SAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,OAAA,EAAS,MAAA;AAAA,QACT,UAAA,EAAY,QAAA;AAAA,QACZ,cAAA,EAAgB,QAAA;AAAA,QAChB,SAAA,EAAW,OAAA;AAAA,QACX,GAAG;AAAA,OACL;AAAA,MAEC,QAAA,EAAA,QAAA,oBAAY,GAAA,CAAC,MAAA,EAAA,EAAK,QAAA,EAAA,oBAAA,EAAkB;AAAA;AAAA,GACvC;AAEJ;ACTO,SAAS,mBAAA,CAAoB;AAAA,EAClC,SAAA;AAAA,EACA,KAAA;AAAA,EACA,QAAQ,EAAC;AAAA,EACT;AACF,CAAA,EAAsB;AACpB,EAAA,uBACE,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAsB,KAAA,EACzB,QAAA,EAAA;AAAA,oBAAAA,GAAAA,CAAC,QAAG,QAAA,EAAA,SAAA,EAAO,CAAA;AAAA,oBACXA,GAAAA,CAAC,KAAA,EAAA,EAAI,KAAA,EAAO,EAAE,OAAA,EAAS,MAAA,EAAQ,GAAA,EAAK,KAAA,EAAM,EACvC,QAAA,EAAA,KAAA,CAAM,GAAA,CAAI,CAAC,IAAA,qBACV,IAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QAEC,OAAA,EAAS,MAAM,YAAA,GAAe,IAAA,CAAK,EAAE,CAAA;AAAA,QACrC,KAAA,EAAO;AAAA,UACL,OAAA,EAAS,MAAA;AAAA,UACT,SAAA,EAAW,MAAA;AAAA,UACX,MAAA,EAAQ,mBAAA;AAAA,UACR,YAAA,EAAc,KAAA;AAAA,UACd,MAAA,EAAQ;AAAA,SACV;AAAA,QAEA,QAAA,EAAA;AAAA,0BAAAA,GAAAA,CAAC,QAAA,EAAA,EAAQ,QAAA,EAAA,IAAA,CAAK,KAAA,EAAM,CAAA;AAAA,UACnB,IAAA,CAAK,WAAA,oBAAeA,GAAAA,CAAC,GAAA,EAAA,EAAE,KAAA,EAAO,EAAE,MAAA,EAAQ,SAAA,EAAW,OAAA,EAAS,GAAA,EAAI,EAAI,eAAK,WAAA,EAAY;AAAA;AAAA,OAAA;AAAA,MAXjF,IAAA,CAAK;AAAA,KAab,CAAA,EACH;AAAA,GAAA,EACF,CAAA;AAEJ;;;AC1CA,aAAA;AAAA,EACE,SAAA;AAAA,EACA;AAAA,IACE,cAAA,EAAgB,kBAAA;AAAA,IAChB,eAAA,EAAiB;AAAA,GACnB;AAAA,EACA;AAAA,IACE,IAAA,EAAM,eAAA;AAAA,IACN,WAAA,EAAa;AAAA;AAEjB,CAAA","file":"index.mjs","sourcesContent":["import type { ComponentType } from 'react';\r\nimport type { ComponentRegistry, ThemeConfig } from '../types';\r\n\r\n// 存储所有主题的组件注册表\r\nconst registries: Record<string, ComponentRegistry> = {};\r\n\r\n// 存储主题配置\r\nconst themeConfigs: Record<string, ThemeConfig> = {};\r\n\r\n/**\r\n * 注册主题组件\r\n * @param themeId 主题 ID (如 'bsd', 'artist', 'concept')\r\n * @param components 组件注册表\r\n * @param config 主题配置（可选）\r\n */\r\nexport function registerTheme(\r\n  themeId: string,\r\n  components: ComponentRegistry,\r\n  config?: Omit<ThemeConfig, 'id'>\r\n): void {\r\n  registries[themeId] = { ...registries[themeId], ...components };\r\n\r\n  if (config) {\r\n    themeConfigs[themeId] = { id: themeId, ...config };\r\n  }\r\n}\r\n\r\n/**\r\n * 注册单个组件到指定主题\r\n * @param themeId 主题 ID\r\n * @param componentName 组件名称\r\n * @param component 组件\r\n */\r\nexport function registerComponent(\r\n  themeId: string,\r\n  componentName: string,\r\n  component: ComponentType<any>\r\n): void {\r\n  if (!registries[themeId]) {\r\n    registries[themeId] = {};\r\n  }\r\n  registries[themeId][componentName] = component;\r\n}\r\n\r\n/**\r\n * 解析组件 - 优先使用主题特定组件，fallback 到 default\r\n * @param themeId 主题 ID\r\n * @param componentName 组件名称\r\n * @returns 组件或 null\r\n */\r\nexport function resolveComponent<P = any>(\r\n  themeId: string,\r\n  componentName: string\r\n): ComponentType<P> | null {\r\n  // 1. 先尝试获取主题特定组件\r\n  const themeComponent = registries[themeId]?.[componentName];\r\n  if (themeComponent) {\r\n    return themeComponent as ComponentType<P>;\r\n  }\r\n\r\n  // 2. Fallback 到 default 主题\r\n  const defaultComponent = registries['default']?.[componentName];\r\n  if (defaultComponent) {\r\n    return defaultComponent as ComponentType<P>;\r\n  }\r\n\r\n  // 3. 未找到\r\n  return null;\r\n}\r\n\r\n/**\r\n * 检查主题是否有特定组件的定制版本\r\n * @param themeId 主题 ID\r\n * @param componentName 组件名称\r\n */\r\nexport function hasCustomComponent(themeId: string, componentName: string): boolean {\r\n  return !!registries[themeId]?.[componentName];\r\n}\r\n\r\n/**\r\n * 获取主题的所有已注册组件名称\r\n * @param themeId 主题 ID\r\n */\r\nexport function getRegisteredComponents(themeId: string): string[] {\r\n  return Object.keys(registries[themeId] || {});\r\n}\r\n\r\n/**\r\n * 获取所有已注册的主题 ID\r\n */\r\nexport function getRegisteredThemes(): string[] {\r\n  return Object.keys(registries);\r\n}\r\n\r\n/**\r\n * 获取主题配置\r\n * @param themeId 主题 ID\r\n */\r\nexport function getThemeConfig(themeId: string): ThemeConfig | null {\r\n  return themeConfigs[themeId] || null;\r\n}\r\n\r\n/**\r\n * 清除所有注册（主要用于测试）\r\n */\r\nexport function clearRegistry(): void {\r\n  Object.keys(registries).forEach((key) => delete registries[key]);\r\n  Object.keys(themeConfigs).forEach((key) => delete themeConfigs[key]);\r\n}\r\n","import React from 'react';\r\n\r\nexport interface LandingPageProps {\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  children?: React.ReactNode;\r\n  onNavigate?: (path: string) => void;\r\n}\r\n\r\n/**\r\n * Default Landing Page - 默认主题的 Landing Page\r\n */\r\nexport function DefaultLandingPage({ className, style, children }: LandingPageProps) {\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: '100vh',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children || <span>Welcome to Monkeys</span>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DefaultLandingPage;\r\n","import React from 'react';\r\n\r\nexport interface ToolDefinition {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n}\r\n\r\nexport interface ToolboxPanelProps {\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  tools?: ToolDefinition[];\r\n  onToolSelect?: (toolId: string) => void;\r\n}\r\n\r\n/**\r\n * Default Toolbox Panel - 默认主题的工具箱面板\r\n */\r\nexport function DefaultToolboxPanel({\r\n  className,\r\n  style,\r\n  tools = [],\r\n  onToolSelect,\r\n}: ToolboxPanelProps) {\r\n  return (\r\n    <div className={className} style={style}>\r\n      <h3>Toolbox</h3>\r\n      <div style={{ display: 'grid', gap: '8px' }}>\r\n        {tools.map((tool) => (\r\n          <button\r\n            key={tool.id}\r\n            onClick={() => onToolSelect?.(tool.id)}\r\n            style={{\r\n              padding: '12px',\r\n              textAlign: 'left',\r\n              border: '1px solid #e0e0e0',\r\n              borderRadius: '8px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            <strong>{tool.title}</strong>\r\n            {tool.description && <p style={{ margin: '4px 0 0', opacity: 0.7 }}>{tool.description}</p>}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DefaultToolboxPanel;\r\n","import { registerTheme } from '../../registry';\r\nimport { DefaultLandingPage } from './components/LandingPage';\r\nimport { DefaultToolboxPanel } from './components/ToolboxPanel';\r\n\r\n// 注册 default 主题\r\nregisterTheme(\r\n  'default',\r\n  {\r\n    'landing-page': DefaultLandingPage,\r\n    'toolbox-panel': DefaultToolboxPanel,\r\n  },\r\n  {\r\n    name: 'Default Theme',\r\n    description: 'Monkeys default theme with basic components',\r\n  }\r\n);\r\n\r\n// 导出组件供直接使用\r\nexport { DefaultLandingPage, DefaultToolboxPanel };\r\n"]}